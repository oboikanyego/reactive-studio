<div fxLayout="column " class="mainContainer" fxLayoutAlign="start stretch" [fxShow]="true" [fxHide]="false">
  <div fxLayout="row wrap" class="mb-10" fxLayoutAlign="space-between center" [fxShow]="true" [fxHide]="false">
    <div>
      <bh-pageheader [data]="pageName ? pageName : &apos;schedules&apos;"></bh-pageheader>
    </div>
    <div fxLayout="row wrap" class="designInput" fxLayoutAlign="start center" [fxShow]="true" [fxHide]="false">
      <bh-quarterselection></bh-quarterselection>
      <mat-form-field style="margin-left: 10px" class="searchTable designInput" [appearance]="&apos;legacy&apos;" [floatLabel]="&apos;auto&apos;" [hideRequiredMarker]="false">
        <input matInput [(ngModel)]="tableSearch" placeholder="Search " [required]="false" (keyup)="searchUsers($event)">
        <mat-icon matSuffix (click)="searchUsers($event)">search</mat-icon>
      </mat-form-field>
      <mat-icon style="cursor: pointer" class="ml-10 downloadBTN" (click)="downloadTableData()" *ngIf="(userInfo.userRole == &apos;admin&apos; || userInfo.ethicsLeader) &amp;&amp; pageName == &apos;reviews&apos;" matTooltip="Download table data" color="primary">file_download</mat-icon>
      <mat-icon style="cursor: pointer" class="ml-10 downloadBTN" (click)="downloadAIDs()" *ngIf="(userInfo.userRole == &apos;admin&apos; || userInfo.ethicsLeader) &amp;&amp; pageName == &apos;reviews&apos;" matTooltip="Download all AID&apos;s" color="primary">cloud_download</mat-icon>
    </div>
  </div>
  <div fxLayout="column wrap" fxLayoutAlign="start stretch" [fxShow]="true" [fxHide]="false">
    <div>
      <table id="downloadTableData" mat-table class="schedulesListTable" [dataSource]="dataSource" matSort>

        <!-- Selection column -->
        <ng-container matColumnDef="selectcheckbox" *ngIf="pageName == &apos;reviews&apos;">
          <th mat-header-cell *matHeaderCellDef>
            <mat-checkbox class="example-margin" color="primary" [checked]="(object.keys(ngModelObj.selectedUser).length == dataSource.data.length) &amp;&amp; dataSource.data.length &gt; 0 " (change)="selectAllAIDs($event)"></mat-checkbox>
          </th>
          <td mat-cell *matCellDef="let table">
            <mat-checkbox class="example-margin" color="primary" [checked]="ngModelObj.selectedUser[table.directorEmail]" (change)="clickedOnSelection($event, table)">
            </mat-checkbox>
          </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Schedule Name </th>
          <td mat-cell *matCellDef="let table" (click)="scheduleClicked(table)"> {{table.name}} </td>
        </ng-container>

        <!-- directorName Column -->
        <ng-container matColumnDef="directorName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Employee Name </th>
          <td mat-cell *matCellDef="let table" (click)="scheduleClicked(table)"> {{table.directorName}} </td>
        </ng-container>

        <!-- Nominated To Column -->
        <ng-container matColumnDef="nominatedTo">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Nominated To </th>
          <td mat-cell *matCellDef="let table" (click)="scheduleClicked(table)">
            {{nominatedToObj[table.name] ? nominatedToObj[table.name].length : 0}}
          </td>
        </ng-container>

        <!-- Nominated To Column -->
        <ng-container matColumnDef="submittedOn">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Submitted on </th>
          <td mat-cell *matCellDef="let table" (click)="scheduleClicked(table)">
            {{submittedDataObj[table.directorEmail] | date: &apos;dd-MM-yyyy&apos;}}
          </td>
        </ng-container>

        <!-- Closing Date Column -->
        <ng-container matColumnDef="closingDate">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Closing Date </th>
          <td mat-cell *matCellDef="let table" (click)="scheduleClicked(table)">
            <span>{{table.closingDate | date : &apos;dd-MM-yyyy&apos;}}</span>
            <!--<span *ngIf="userInfo.userRole == 'user'">{{table.closingDate | date : 'dd-MM-yyyy'}}</span>-->
          </td>
        </ng-container>

        <!-- Nothing to Declare Column -->
        <ng-container matColumnDef="nothingDeclare">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> </th>
          <td mat-cell *matCellDef="let table">
            <span class="status-{{table.assignedTo[0].status}}" *ngIf="userInfo.userRole == &apos;director&apos;">
          <button class="nothingDeclareBTN" *ngIf="table.type !== &apos;AIDView&apos;" mat-raised-button color="basic" disabled="{{table.assignedTo[0].status == &apos;completed&apos; ? true : false}}" (click)="nothingToDeclare(table, $event)">
            Nothing to Declare
          </button>
        </span>
          </td>
        </ng-container>

        <!-- Status Column -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
          <td mat-cell *matCellDef="let table" (click)="scheduleClicked(table)">
            <!--<span class="status-{{table.assignedTo[0].status}}" *ngIf="userInfo.userRole == 'director'"> {{table.assignedTo[0].status}} </span>
        <span class="status-{{table.nominatedTo[0].status}}" 
                  *ngIf="userInfo.userRole == 'user' && table.nominatedTo">
                   {{table.nominatedTo[0].status}}
        </span>
        <span class="status-{{table.assignedTo[0].status}}" 
                  *ngIf="userInfo.userRole == 'user' && table.assignedTo">
                   {{table.assignedTo[0].status}}
        </span>-->
            <span class="status-{{table.status}}">{{table.status}}</span>
          </td>
        </ng-container>

        <!-- Approved Column -->
        <ng-container matColumnDef="approved">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Approval </th>
          <td mat-cell *matCellDef="let table" (click)="scheduleClicked(table)">
            {{table.status}}
          </td>
        </ng-container>

        <!-- Action Column -->
        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> </th>
          <td mat-cell *matCellDef="let table"> </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns;"></tr>
        <tr mat-row *matRowDef="let table; columns: displayedColumns;" class="schedulesListTableTR">
        </tr>
      </table>
    </div>
  </div>
  <div fxLayout="column wrap" fxLayoutAlign="start stretch" [fxShow]="true" [fxHide]="false"></div>
</div>